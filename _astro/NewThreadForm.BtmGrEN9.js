import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.WFquGv8Z.js";function p(){const[r,n]=o.useState(""),[u,i]=o.useState(""),[l,t]=o.useState(!1),c=async e=>{if(e.preventDefault(),!window.supabaseClient){console.error("Supabase client not found on window"),t(!1);return}t(!0);const{data:{user:d}}=await window.supabaseClient.auth.getUser();if(!d){alert("You must be logged in to post!"),t(!1);return}const{data:h,error:s}=await supabase.from("threads").insert([{title:r,content:u,author_id:d.id,slug:r.toLowerCase().replace(/ /g,"-")+"-"+Math.random().toString(36).substr(2,5)}]);s?(console.error(s),alert("Error creating thread: "+s.message)):(alert("Thread created successfully!"),n(""),i("")),t(!1)};return a.jsxs("form",{onSubmit:c,className:"new-thread-form",children:[a.jsx("input",{type:"text",placeholder:"Thread Title",value:r,onChange:e=>n(e.target.value),required:!0}),a.jsx("textarea",{placeholder:"What's on your mind?",value:u,onChange:e=>i(e.target.value),required:!0}),a.jsx("button",{type:"submit",disabled:l,children:l?"Posting...":"Create Thread"})]})}export{p as default};
